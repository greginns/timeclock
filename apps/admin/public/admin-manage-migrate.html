<page id='admin-manage-migrate' style='display: none'>
  <section id='admin-manage-migrate-section'>
    
    <div class='row justify-content-center'>
      <div class='col-12 col-sm-6'>
        
        <div class='card'>
          <div class='card-header'>
            <div class='row'>
              <div class='col-6 col-sm-4'>
                {{ buttons.btn(class='primary', mvc_click='migrateAll', text='Run All Migrations') }}
              </div>
              <div class='col-6 col-sm-3' mvc-show='this.$get("runAll")'>
                {{ buttons.btn(class='danger', mvc_click='abortAll', text='Abort') }}
              </div>
            </div>      
          </div>
          
          <div class='card-body'>
            <div class='row'>
              <div class='col-12 col-sm-6'>
                <div mvc-each='tenants'>
                  <div class='row' data-index='$index'>
                    <div class='col-6'>
                      <span mvc-text='tenants[$index].coname'></span>    
                    </div>
                    <div class='col-2'>
                      {{ buttons.btn(class='primary btn-sm', mvc_click='migrateOne', text='Run') }}
                    </div>
                  </div>
                  <div class='row' data-index='$index'>
                    <div class='col-12'>
                      <span mvc-text='errors[$index]'></span>    
                    </div>
                  </div>
                </div>
              </div>
            </div>          
          </div>
        </div>
        
      </div>
    </div>
  
    <div aria-live="polite" aria-atomic="true" style="position: absolute; bottom: 5px; right: 0; z-index:20000">
      <div style="position: absolute; bottom: 5px; right: 0; min-width: 350px">
        <div class="toast" id="admin-manage-migrate-toast1" role="alert" aria-live="assertive" aria-atomic="true">
          <div class="toast-header">
            <strong class="mr-auto">TimeKeep</strong>
            <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="toast-body">
            <span mvc-text='toastMessage'></span>
          </div>
        </div>  
      </div>
    </div>
  </section>
  
  <script>
    (function() {
      var page = $('#admin-manage-migrate');
      var section = $('#admin-manage-migrate-section');
      var path = '/migrations';
      var title = 'Admin';

      App.mvcs[section[0].id] = {mvcObj: App.mvcObjs.admin_manage_migrate, page: page, section: section, path: path, title: title};
    })();
  </script>
</page>
